
# Netease Music Downloader [Pro]

一个基于 Python 的网易云音乐高音质下载工具。
专注于**无损/母带/Hi-Res**音质的获取，支持歌单批量下载、多线程并发、元数据自动补全。

> **声明**：本项目仅供 Python 学习与技术研究使用，请勿用于商业用途。下载后请于 24 小时内删除，支持正版音乐。

## ✨ 核心特性

- **🎧 全音质支持**：支持解析 **超清母带 (Master)**、**沉浸环绕 (Sky)**、**高清臻音**、**Hi-Res**、**无损 (FLAC)** 等所有等级。
- **⚡ 极速并发**：内置线程池，歌单下载开启 **4线程并发**，速度飞快。
- **🧠 智能策略**：
  - **身份自适应**：启动时选择 SVIP/VIP/普通身份，自动剪枝无效请求，杜绝报错。
  - **智能去重**：自动识别不同音质等级是否指向同一文件，避免重复列表。
- **📂 完美整理**：
  - 自动按 `歌手名` 创建文件夹。
  - 自动写入 **封面、歌名、歌手、专辑、歌词** 等元数据。
- **🛠️ 灵活交互**：
  - 支持 **单曲 ID**、**歌单 ID**、**完整链接** 输入。
  - 歌单支持 **自定义范围**（如 `1-5, 8, all`）批量选择。

## 🚀 快速开始

### 1. 环境准备

确保你的电脑已安装 [Python 3.8+](https://www.python.org/)。

```bash
# 1. 克隆或下载本项目到本地
# 2. 安装依赖
pip install -r requirements.txt
```

### 2. 配置 Cookie (关键)

为了获取高音质（VIP/SVIP 资源），你需要提供你的网易云音乐 Cookie。

1. 在浏览器访问 [网易云音乐官网](https://music.163.com/) 并登录。
2. 按 `F12` 打开开发者工具，切换到 **Network (网络)** 选项卡。
3. 刷新页面，点击列表中的任意请求（如 `music.163.com`）。
4. 在右侧 **Request Headers (请求头)** 中找到 **`Cookie`**。
5. 复制 `Cookie:` 冒号后面的**所有内容**。
6. 在项目根目录下新建文件 `cookie.txt`，将内容粘贴进去并保存。

> **提示**：`cookie.txt` 内容应为一行长字符串，包含 `MUSIC_U=...` 等字段。

### 3. 运行程序

```bash
python run.py
```

## 📖 使用指南

### 步骤一：选择身份策略
程序启动后，会询问你的账号等级。这决定了下载音质的上限，防止请求无权资源导致降级报错。

```text
1. 黑胶 SVIP  -> 尝试获取 母带/沉浸声/臻音...
2. 黑胶 VIP   -> 尝试获取 臻音/Hi-Res/无损...
3. 普通用户   -> 仅尝试 极高(MP3)/标准...
```

### 步骤二：输入资源
支持多种格式，直接粘贴即可：
- **单曲 ID**：`1838919030`
- **歌单 ID**：`5327666624`
- **网页链接**：`https://music.163.com/#/song?id=...`

### 步骤三：下载模式

- **单曲模式**：会自动列出该歌曲所有可用音质（去重后），输入序号即可下载。
- **歌单模式**：
  1. **下载全部**：自动选择每首歌的最高可用音质，多线程极速下载。
  2. **自选歌曲**：拉取歌单列表，支持输入 `1-3, 5, 10` 进行挑选。

## 📂 目录结构

```text
MyNetease/
├── MyMusic/             # [自动生成] 下载目录，按歌手分类
├── api.py               # 核心 API 封装 (加密/请求)
├── downloader.py        # 下载与标签处理逻辑
├── run.py               # 主程序入口
├── cookie.txt           # 你的 Cookie 文件
├── requirements.txt     # 项目依赖
└── README.md            # 说明文档
```

## ⚠️ 常见问题

**Q: 为什么我有 SVIP，但下载不到母带？**
A: 1. 确认 `cookie.txt` 是否过期，请重新提取。
   2. 该歌曲源文件本身可能没有母带版本（此时程序会自动降级下载无损）。

**Q: 下载速度慢？**
A: 极速版已开启多线程。如果是海外用户，受限于网易云服务器 CDN，速度可能会受限。

---
*Created by Lxc, 2025.*


### 3. 最终的项目文件结构建议
文件夹
```text
MyNetease/
│
├── api.py           (核心请求逻辑，已包含Header伪装)
├── downloader.py    (负责文件流写入和ID3标签)
├── run.py           (主程序，v5.1版本)
├── requirements.txt (依赖列表)
├── cookie.txt       (你的登录凭证)
└── README.md        (项目说明)
```
